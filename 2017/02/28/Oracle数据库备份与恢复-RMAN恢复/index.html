<!DOCTYPE html><html lang="zh-CN"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content="Blog"><title>Oracle数据库备份与恢复 - RMAN恢复 | Jack Wang Blog</title><link rel="stylesheet" type="text/css" href="/css/style.css?v=2.0.0"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/normalize/6.0.0/normalize.min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/0.6.2/pure-min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/0.6.2/grids-responsive-min.css"><link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//cdn.bootcss.com/jquery/3.2.1/jquery.min.js"></script><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"><link rel="alternate" type="application/atom+xml" href="/atom.xml"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">Oracle数据库备份与恢复 - RMAN恢复</h1><a id="logo" href="/.">Jack Wang Blog</a><p class="description">Goals determine what you are going to be</p></div><div id="nav-menu"><a href="/." class="current"><i class="fa fa-home"> 首页</i></a><a href="/archives/"><i class="fa fa-archive"> 归档</i></a><a href="/about/"><i class="fa fa-user"> 关于</i></a><a href="/atom.xml"><i class="fa icon-rss"> 订阅</i></a></div></div><div id="layout" class="pure-g"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">Oracle数据库备份与恢复 - RMAN恢复</h1><div class="post-meta">Feb 28, 2017<span> | </span><span class="category"><a href="/categories/Database/">Database</a></span><script src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js" async></script><span id="busuanzi_container_page_pv"> | <span id="busuanzi_value_page_pv"></span><span> Hits</span></span></div><a data-disqus-identifier="2017/02/28/Oracle数据库备份与恢复-RMAN恢复/" href="/2017/02/28/Oracle数据库备份与恢复-RMAN恢复/#disqus_thread" class="disqus-comment-count"></a><div class="clear"><div id="toc" class="toc-article"><div class="toc-title">文章目录</div><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#RMAN恢复原理"><span class="toc-number">1.</span> <span class="toc-text">RMAN恢复原理</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#RMAN如何选择备份集"><span class="toc-number">2.</span> <span class="toc-text">RMAN如何选择备份集</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#RMAN能做哪些恢复"><span class="toc-number">3.</span> <span class="toc-text">RMAN能做哪些恢复</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#RMAN之恢复"><span class="toc-number">4.</span> <span class="toc-text">RMAN之恢复</span></a></li></ol></div></div><div class="post-content"><script src="/assets/js/DPlayer.min.js"> </script><script src="/assets/js/APlayer.min.js"> </script><h2 id="RMAN恢复原理"><a href="#RMAN恢复原理" class="headerlink" title="RMAN恢复原理"></a>RMAN恢复原理</h2><p>首先还是得理解Oracle数据库恢复的一个原理。数据库恢复是指将数据库恢复到一个一致性的状态，整个恢复操作可以分为两个步骤，数据库修复（RESTORE）和恢复（RECOVER）<br><a href="https://docs.oracle.com/cd/B19306_01/backup.102/b14192/recov001.htm" target="_blank" rel="external">Oracle官方文档</a>上关于Restore和Recover的解释：<br> The two most important RMAN commands used in database recovery are:  </p>
<ul>
<li>RESTORE, which retrieves files from RMAN backups based on the contents of the RMAN repository</li>
<li><p>RECOVER, which performs complete or point-in-time media recovery using available datafiles and redo logs.<br>Restore是指将要恢复的文件从备份集中读取出来。<br>Recover是指应用所有重做日志，将数据库恢复到崩溃前的状态，或者应用部分REDO，将数据库恢复到指定的时间点。<br><img src="http://note.youdao.com/yws/api/personal/file/1D33C7DE579145B8A0B4B2527036349C?method=download&amp;shareKey=839a02001f760c7413f2370bc57a0092" alt="image"><br>上图是一个最典型的恢复过程，数据库在SCN=100时执行了数据库备份，在SCN=500时数据库出现介质错误，需要通过备份进行恢复  </p>
<p>操作步骤：  </p>
</li>
</ul>
<ol>
<li>首先使用SCN=100时创建的数据库备份将数据库恢复到备份时的状态，这个操作就是修复（RESTORE）</li>
<li>然后重新应用SCN 100～500之间生成的所有重做日志，这个操作就是恢复（RECOVER），最后数据库被恢复到崩溃前的状态。<br>由上可知，Oracle数据库中的备份恢复必然是先有备份，然后才能做恢复的操作。不管是RMAN备份恢复，或者是用户管理的备份和恢复，恢复操作都是从备份时间点向前进行恢复，不可能直接将当前状态向后恢复到之前的某个时间点（Oracle 10g R2新推出的Flashback Database特性开始支持，直接从当前时间点向之前的时间点恢复）</li>
</ol>
<h2 id="RMAN如何选择备份集"><a href="#RMAN如何选择备份集" class="headerlink" title="RMAN如何选择备份集"></a>RMAN如何选择备份集</h2><p>很多新接触RMAN的朋友都会有这样的疑问：我执行过很多次备份，早也备份是晚也备份，昨天也备份今天也备份，在恢复的时候，RMAN怎么知道从哪个备份集中选择文件用来恢复呢？<br>答案其实很简单，RMAN一开始也不知道，它只是遵循固定的规则，按照你的要求去寻找合适的备份集罢了，<strong>首先是寻找最近的可用的备份集</strong>（如果没有指定UNTIL子句则从最近的备份开始，如果指定了UNTIL，则从满足UNTIL的备份集开始），<strong>如果能找到，那么运气不错，恢复将会继续正常进行，如果找到了多个，还有更加细致的规则，从中选择一个RMAN觉着最优的备份集来做恢复</strong>（如优先选择镜像复制，因为RMAN认为这样恢复时会更快）。如果最终一个备份集都没找到，嘿嘿，那就只有一个选择了：报错  </p>
<h2 id="RMAN能做哪些恢复"><a href="#RMAN能做哪些恢复" class="headerlink" title="RMAN能做哪些恢复"></a>RMAN能做哪些恢复</h2><p>之前的文章<a href="https://yfshare.github.io/2017/02/28/Oracle数据库备份与恢复-RMAN备份/" target="_blank" rel="external">Oracle数据库备份与恢复 - RMAN备份</a>里有写到RMAN可以做多种备份，包括：</p>
<ol>
<li>整库备份；</li>
<li>表空间的备份；</li>
<li>数据文件的备份；</li>
<li>控制文件备份；</li>
<li>归档文件的备份；</li>
<li>初始化参数文件的备份；  </li>
<li>对备份集备份；  </li>
</ol>
<p>对于恢复，RMAN中提供了多种不同级别的恢复方式，可以恢复整个数据库，恢复某个或某几个表空间，某个或某几个数据文件，单独恢复控制文件，初始化参数文件，或者归档文件等等。能用RMAN备份的都能恢复</p>
<h2 id="RMAN之恢复"><a href="#RMAN之恢复" class="headerlink" title="RMAN之恢复"></a>RMAN之恢复</h2><ol>
<li>对数据库进行完全恢复  </li>
</ol>
<p>如果当前数据库只剩下控制文件和SPFILE，其他数据文件因为某些原因导致全部丢失，不过幸运的是之前创建过整库的备份，并且执行备份操作之后，所有的归档文件和重做日志文件都还在，这种情况下你就可以将数据库恢复到崩溃前那一刻的状态，而这种恢复方式，就叫做完全介质恢复。<br>做数据库完全恢复，需要数据库处于MOUNT状态（如果数据库处于OPEN状态会报ORA-19573错误）<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#启动数据库到加载状态：</span></div><div class="line">RMAN&gt; STARTUP MOUNT;</div><div class="line"></div><div class="line">connected to target database (not started)</div><div class="line">Oracle instance started</div><div class="line">database mounted</div><div class="line"></div><div class="line">Total System Global Area    1071333376 bytes</div><div class="line"></div><div class="line">Fixed Size                     1375792 bytes</div><div class="line">Variable Size                637534672 bytes</div><div class="line">Database Buffers             427819008 bytes</div><div class="line">Redo Buffers                   4603904 bytes</div></pre></td></tr></table></figure></p>
<p>执行恢复操作(恢复分两步，先执行RESTORE DATABASE;，在执行RECOVER DATABASE;)<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div></pre></td><td class="code"><pre><div class="line">RMAN&gt; restore database;</div><div class="line"></div><div class="line">Starting restore at 15-JUL-15</div><div class="line">allocated channel: ORA_DISK_1</div><div class="line">channel ORA_DISK_1: SID=63 device <span class="built_in">type</span>=DISK</div><div class="line"></div><div class="line">channel ORA_DISK_1: restoring datafile 00001</div><div class="line">input datafile copy RECID=2 STAMP=884555266 file name=E:\APP\TIANPAN\FLASH_RECOVERY_AREA\PTIAN\DATAFILE\O1_MF_SYSTEM_BSTBH904_.DBF</div><div class="line">destination <span class="keyword">for</span> restore of datafile 00001: E:\APP\TIANPAN\ORADATA\PTIAN\SYSTEM01.DBF</div><div class="line">channel ORA_DISK_1: copied datafile copy of datafile 00001</div><div class="line">output file name=E:\APP\TIANPAN\ORADATA\PTIAN\SYSTEM01.DBF RECID=0 STAMP=0</div><div class="line">channel ORA_DISK_1: restoring datafile 00002</div><div class="line">input datafile copy RECID=3 STAMP=884555292 file name=E:\APP\TIANPAN\FLASH_RECOVERY_AREA\PTIAN\DATAFILE\O1_MF_SYSAUX_BSTBJDFQ_.DBF</div><div class="line">destination <span class="keyword">for</span> restore of datafile 00002: E:\APP\TIANPAN\ORADATA\PTIAN\SYSAUX01.DBF</div><div class="line">channel ORA_DISK_1: copied datafile copy of datafile 00002</div><div class="line">output file name=E:\APP\TIANPAN\ORADATA\PTIAN\SYSAUX01.DBF RECID=0 STAMP=0</div><div class="line">channel ORA_DISK_1: restoring datafile 00003</div><div class="line">input datafile copy RECID=4 STAMP=884555305 file name=E:\APP\TIANPAN\FLASH_RECOVERY_AREA\PTIAN\DATAFILE\O1_MF_UNDOTBS1_BSTBK5V1_.DBF</div><div class="line">destination <span class="keyword">for</span> restore of datafile 00003: E:\APP\TIANPAN\ORADATA\PTIAN\UNDOTBS01.DBF</div><div class="line">channel ORA_DISK_1: copied datafile copy of datafile 00003</div><div class="line">output file name=E:\APP\TIANPAN\ORADATA\PTIAN\UNDOTBS01.DBF RECID=0 STAMP=0</div><div class="line">channel ORA_DISK_1: restoring datafile 00004</div><div class="line">input datafile copy RECID=7 STAMP=884555314 file name=E:\APP\TIANPAN\FLASH_RECOVERY_AREA\PTIAN\DATAFILE\O1_MF_USERS_BSTBKKVB_.DBF</div><div class="line">destination <span class="keyword">for</span> restore of datafile 00004: E:\APP\TIANPAN\ORADATA\PTIAN\USERS01.DBF</div><div class="line">channel ORA_DISK_1: copied datafile copy of datafile 00004</div><div class="line">output file name=E:\APP\TIANPAN\ORADATA\PTIAN\USERS01.DBF RECID=0 STAMP=0</div><div class="line">channel ORA_DISK_1: restoring datafile 00005</div><div class="line">input datafile copy RECID=5 STAMP=884555312 file name=E:\APP\TIANPAN\FLASH_RECOVERY_AREA\PTIAN\DATAFILE\O1_MF_EXAMPLE_BSTBKF80_.DBF</div><div class="line">destination <span class="keyword">for</span> restore of datafile 00005: E:\APP\TIANPAN\ORADATA\PTIAN\EXAMPLE01.DBF</div><div class="line">channel ORA_DISK_1: copied datafile copy of datafile 00005</div><div class="line">output file name=E:\APP\TIANPAN\ORADATA\PTIAN\EXAMPLE01.DBF RECID=0 STAMP=0</div><div class="line">Finished restore at 15-JUL-15</div></pre></td></tr></table></figure></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">RMAN&gt; RECOVER DATABASE;</div><div class="line"></div><div class="line">Starting recover at 15-JUL-15</div><div class="line">using channel ORA_DISK_1</div><div class="line"></div><div class="line">starting media recovery</div><div class="line"></div><div class="line">archived <span class="built_in">log</span> <span class="keyword">for</span> thread 1 with sequence 105 is already on disk as file E:\APP\TIANPAN\FLASH_RECOVERY_AREA\PTIAN\ARCHIVELOG\2015_07_09\O1_MF_1_105_BSWC39YH_.ARC</div><div class="line">archived <span class="built_in">log</span> <span class="keyword">for</span> thread 1 with sequence 106 is already on disk as file E:\APP\TIANPAN\FLASH_RECOVERY_AREA\PTIAN\ARCHIVELOG\2015_07_10\O1_MF_1_106_BSYCRLNG_.ARC</div><div class="line">archived <span class="built_in">log</span> <span class="keyword">for</span> thread 1 with sequence 107 is already on disk as file E:\APP\TIANPAN\FLASH_RECOVERY_AREA\PTIAN\ARCHIVELOG\2015_07_11\O1_MF_1_107_BT10F9Y9_.ARC</div><div class="line">archived <span class="built_in">log</span> <span class="keyword">for</span> thread 1 with sequence 108 is already on disk as file E:\APP\TIANPAN\FLASH_RECOVERY_AREA\PTIAN\ARCHIVELOG\2015_07_11\O1_MF_1_108_BT1M9PW5_.ARC</div><div class="line">archived <span class="built_in">log</span> <span class="keyword">for</span> thread 1 with sequence 109 is already on disk as file E:\APP\TIANPAN\FLASH_RECOVERY_AREA\PTIAN\ARCHIVELOG\2015_07_15\O1_MF_1_109_BTCH29LR_.ARC</div><div class="line">archived <span class="built_in">log</span> file name=E:\APP\TIANPAN\FLASH_RECOVERY_AREA\PTIAN\ARCHIVELOG\2015_07_09\O1_MF_1_105_BSWC39YH_.ARC thread=1 sequence=105</div><div class="line">archived <span class="built_in">log</span> file name=E:\APP\TIANPAN\FLASH_RECOVERY_AREA\PTIAN\ARCHIVELOG\2015_07_10\O1_MF_1_106_BSYCRLNG_.ARC thread=1 sequence=106</div><div class="line">archived <span class="built_in">log</span> file name=E:\APP\TIANPAN\FLASH_RECOVERY_AREA\PTIAN\ARCHIVELOG\2015_07_11\O1_MF_1_107_BT10F9Y9_.ARC thread=1 sequence=107</div><div class="line">media recovery complete, elapsed time: 00:00:22</div><div class="line">Finished recover at 15-JUL-15</div><div class="line"></div><div class="line">RMAN&gt;</div></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#打开数据库： </span></div><div class="line">RMAN&gt;  ALTER DATABASE OPEN;</div><div class="line"></div><div class="line">database opened</div><div class="line"></div><div class="line">RMAN&gt;</div></pre></td></tr></table></figure>
<ol>
<li>表空间恢复  </li>
</ol>
<p>在执行恢复之前，如果被操作的表空间未处于OFFLINE状态，必须首先通过ALTER TABLESPACE tablespace_name OFFLINE语句将其置为脱机<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">SQL&gt; select * from v<span class="variable">$tablespace</span>;</div><div class="line">       TS<span class="comment"># NAME                           INCLUDED_IN_DATABASE_BACKUP BIGFILE FLASHBACK_ON ENCRYPT_IN_BACKUP</span></div><div class="line">---------- ------------------------------ --------------------------- ------- ------------ -----------------</div><div class="line">         0 SYSTEM                         YES                         NO      YES          </div><div class="line">         1 SYSAUX                         YES                         NO      YES          </div><div class="line">         2 UNDOTBS1                       YES                         NO      YES          </div><div class="line">         4 USERS                          YES                         NO      YES          </div><div class="line">         3 TEMP                           NO                          NO      YES          </div><div class="line">         6 EXAMPLE                        YES                         NO      YES          </div><div class="line">6 rows selected</div><div class="line">SQL&gt;</div></pre></td></tr></table></figure></p>
<p>以恢复Example表空间为例<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">操作步骤如下： </div><div class="line">RMAN&gt; SQL <span class="string">'ALTER TABLESPACE EXAMPLE OFFLINE IMMEDIATE'</span>; </div><div class="line">RMAN&gt; RESTORE TABLESPACE EXAMPLE; </div><div class="line">RMAN&gt; RECOVER TABLESPACE EXAMPLE; </div><div class="line">RMAN&gt; SQL <span class="string">'ALTER TABLESPACE  EXAMPLE ONLINE'</span>;</div></pre></td></tr></table></figure></p>
<p>上述执行的四个脚本，表示将表空间置于OFFLINE状态，执行RESTORE命令，执行RECOVER命令，最后将表空间置为ONLINE状态<br>示例：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div></pre></td><td class="code"><pre><div class="line">RMAN&gt; SQL <span class="string">'ALTER TABLESPACE EXAMPLE OFFLINE IMMEDIATE'</span>;</div><div class="line"></div><div class="line">sql statement: ALTER TABLESPACE EXAMPLE OFFLINE IMMEDIATE</div><div class="line"></div><div class="line">RMAN&gt; RESTORE TABLESPACE EXAMPLE;</div><div class="line"></div><div class="line">Starting restore at 15-JUL-15</div><div class="line">using channel ORA_DISK_1</div><div class="line"></div><div class="line">channel ORA_DISK_1: restoring datafile 00005</div><div class="line">input datafile copy RECID=5 STAMP=884555312 file name=E:\APP\TIANPAN\FLASH_RECOVERY_AREA\PTIAN\DATAFILE\O1_MF_EXAMPLE_BSTBKF80_.DBF</div><div class="line">destination <span class="keyword">for</span> restore of datafile 00005: E:\APP\TIANPAN\ORADATA\PTIAN\EXAMPLE01.DBF</div><div class="line">channel ORA_DISK_1: copied datafile copy of datafile 00005</div><div class="line">output file name=E:\APP\TIANPAN\ORADATA\PTIAN\EXAMPLE01.DBF RECID=0 STAMP=0</div><div class="line">Finished restore at 15-JUL-15</div><div class="line"></div><div class="line">RMAN&gt; RECOVER TABLESPACE EXAMPLE;</div><div class="line"></div><div class="line">Starting recover at 15-JUL-15</div><div class="line">using channel ORA_DISK_1</div><div class="line"></div><div class="line">starting media recovery</div><div class="line"></div><div class="line">archived <span class="built_in">log</span> <span class="keyword">for</span> thread 1 with sequence 105 is already on disk as file E:\APP\TIANPAN\FLASH_RECOVERY_AREA\PTIAN\ARCHIVELOG\2015_07_09\O1_MF_1_105_BSWC39YH_.ARC</div><div class="line">archived <span class="built_in">log</span> <span class="keyword">for</span> thread 1 with sequence 106 is already on disk as file E:\APP\TIANPAN\FLASH_RECOVERY_AREA\PTIAN\ARCHIVELOG\2015_07_10\O1_MF_1_106_BSYCRLNG_.ARC</div><div class="line">archived <span class="built_in">log</span> <span class="keyword">for</span> thread 1 with sequence 107 is already on disk as file E:\APP\TIANPAN\FLASH_RECOVERY_AREA\PTIAN\ARCHIVELOG\2015_07_11\O1_MF_1_107_BT10F9Y9_.ARC</div><div class="line">archived <span class="built_in">log</span> <span class="keyword">for</span> thread 1 with sequence 108 is already on disk as file E:\APP\TIANPAN\FLASH_RECOVERY_AREA\PTIAN\ARCHIVELOG\2015_07_11\O1_MF_1_108_BT1M9PW5_.ARC</div><div class="line">archived <span class="built_in">log</span> <span class="keyword">for</span> thread 1 with sequence 109 is already on disk as file E:\APP\TIANPAN\FLASH_RECOVERY_AREA\PTIAN\ARCHIVELOG\2015_07_15\O1_MF_1_109_BTCH29LR_.ARC</div><div class="line">archived <span class="built_in">log</span> file name=E:\APP\TIANPAN\FLASH_RECOVERY_AREA\PTIAN\ARCHIVELOG\2015_07_09\O1_MF_1_105_BSWC39YH_.ARC thread=1 sequence=105</div><div class="line">archived <span class="built_in">log</span> file name=E:\APP\TIANPAN\FLASH_RECOVERY_AREA\PTIAN\ARCHIVELOG\2015_07_10\O1_MF_1_106_BSYCRLNG_.ARC thread=1 sequence=106</div><div class="line">archived <span class="built_in">log</span> file name=E:\APP\TIANPAN\FLASH_RECOVERY_AREA\PTIAN\ARCHIVELOG\2015_07_11\O1_MF_1_107_BT10F9Y9_.ARC thread=1 sequence=107</div><div class="line">media recovery complete, elapsed time: 00:00:03</div><div class="line">Finished recover at 15-JUL-15</div><div class="line"></div><div class="line">RMAN&gt; SQL <span class="string">'ALTER TABLESPACE  EXAMPLE ONLINE'</span>;</div><div class="line"></div><div class="line">sql statement: ALTER TABLESPACE  EXAMPLE ONLINE</div><div class="line"></div><div class="line">RMAN&gt;</div></pre></td></tr></table></figure></p>
<ol>
<li>数据文件的恢复  </li>
</ol>
<p>恢复表空间实际就是恢复其所对应的数据文件（一个表空间可能对应多个数据文件），因此恢复数据文件的操作步骤与上极其相似<br>同样在恢复操作之前，如果需要被恢复的数据文件未处于OFFLINE状态，需要通过ALTER DATABASE DATAFILE … OFFLINE语句将其置为脱机。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">SQL&gt;  select file<span class="comment">#, name,status, enabled from v$datafile;</span></div><div class="line">     FILE<span class="comment"># NAME                                                                             STATUS  ENABLED</span></div><div class="line">---------- -------------------------------------------------------------------------------- ------- ----------</div><div class="line">         1 E:\APP\TIANPAN\ORADATA\PTIAN\SYSTEM01.DBF                                        SYSTEM  READ WRITE</div><div class="line">         2 E:\APP\TIANPAN\ORADATA\PTIAN\SYSAUX01.DBF                                        ONLINE  READ WRITE</div><div class="line">         3 E:\APP\TIANPAN\ORADATA\PTIAN\UNDOTBS01.DBF                                       ONLINE  READ WRITE</div><div class="line">         4 E:\APP\TIANPAN\ORADATA\PTIAN\USERS01.DBF                                         ONLINE  READ WRITE</div><div class="line">         5 E:\APP\TIANPAN\ORADATA\PTIAN\EXAMPLE01.DBF                                       ONLINE  READ WRITE</div><div class="line"></div><div class="line">SQL&gt;</div></pre></td></tr></table></figure></p>
<p>以恢复datafile 5为例<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">RMAN&gt; SQL <span class="string">'ALTER DATABASE DATAFILE 5 OFFLINE'</span>; </div><div class="line">RMAN&gt; RESTORE DATAFILE 5; </div><div class="line">RMAN&gt; RECOVER DATAFILE 5; </div><div class="line">RMAN&gt; SQL <span class="string">'ALTER DATABASE DATAFILE 5 ONLINE'</span>;</div></pre></td></tr></table></figure></p>
<p>示例：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div></pre></td><td class="code"><pre><div class="line">RMAN&gt; SQL <span class="string">'ALTER DATABASE DATAFILE 5 OFFLINE'</span>;</div><div class="line"></div><div class="line">sql statement: ALTER DATABASE DATAFILE 5 OFFLINE</div><div class="line"></div><div class="line">RMAN&gt; RESTORE DATAFILE 5;</div><div class="line"></div><div class="line">Starting restore at 15-JUL-15</div><div class="line">using channel ORA_DISK_1</div><div class="line"></div><div class="line">channel ORA_DISK_1: restoring datafile 00005</div><div class="line">input datafile copy RECID=5 STAMP=884555312 file name=E:\APP\TIANPAN\FLASH_RECOVERY_AREA\PTIAN\DATAFILE\O1_MF_EXAMPLE_BSTBKF80_.DBF</div><div class="line">destination <span class="keyword">for</span> restore of datafile 00005: E:\APP\TIANPAN\ORADATA\PTIAN\EXAMPLE01.DBF</div><div class="line">channel ORA_DISK_1: copied datafile copy of datafile 00005</div><div class="line">output file name=E:\APP\TIANPAN\ORADATA\PTIAN\EXAMPLE01.DBF RECID=0 STAMP=0</div><div class="line">Finished restore at 15-JUL-15</div><div class="line"></div><div class="line">RMAN&gt; RECOVER DATAFILE 5;</div><div class="line"></div><div class="line">Starting recover at 15-JUL-15</div><div class="line">using channel ORA_DISK_1</div><div class="line"></div><div class="line">starting media recovery</div><div class="line"></div><div class="line">archived <span class="built_in">log</span> <span class="keyword">for</span> thread 1 with sequence 105 is already on disk as file E:\APP\TIANPAN\FLASH_RECOVERY_AREA\PTIAN\ARCHIVELOG\2015_07_09\O1_MF_1_105_BSWC39YH_.ARC</div><div class="line">archived <span class="built_in">log</span> <span class="keyword">for</span> thread 1 with sequence 106 is already on disk as file E:\APP\TIANPAN\FLASH_RECOVERY_AREA\PTIAN\ARCHIVELOG\2015_07_10\O1_MF_1_106_BSYCRLNG_.ARC</div><div class="line">archived <span class="built_in">log</span> <span class="keyword">for</span> thread 1 with sequence 107 is already on disk as file E:\APP\TIANPAN\FLASH_RECOVERY_AREA\PTIAN\ARCHIVELOG\2015_07_11\O1_MF_1_107_BT10F9Y9_.ARC</div><div class="line">archived <span class="built_in">log</span> <span class="keyword">for</span> thread 1 with sequence 108 is already on disk as file E:\APP\TIANPAN\FLASH_RECOVERY_AREA\PTIAN\ARCHIVELOG\2015_07_11\O1_MF_1_108_BT1M9PW5_.ARC</div><div class="line">archived <span class="built_in">log</span> <span class="keyword">for</span> thread 1 with sequence 109 is already on disk as file E:\APP\TIANPAN\FLASH_RECOVERY_AREA\PTIAN\ARCHIVELOG\2015_07_15\O1_MF_1_109_BTCH29LR_.ARC</div><div class="line">archived <span class="built_in">log</span> file name=E:\APP\TIANPAN\FLASH_RECOVERY_AREA\PTIAN\ARCHIVELOG\2015_07_09\O1_MF_1_105_BSWC39YH_.ARC thread=1 sequence=105</div><div class="line">archived <span class="built_in">log</span> file name=E:\APP\TIANPAN\FLASH_RECOVERY_AREA\PTIAN\ARCHIVELOG\2015_07_10\O1_MF_1_106_BSYCRLNG_.ARC thread=1 sequence=106</div><div class="line">archived <span class="built_in">log</span> file name=E:\APP\TIANPAN\FLASH_RECOVERY_AREA\PTIAN\ARCHIVELOG\2015_07_11\O1_MF_1_107_BT10F9Y9_.ARC thread=1 sequence=107</div><div class="line">media recovery complete, elapsed time: 00:00:04</div><div class="line">Finished recover at 15-JUL-15</div><div class="line"></div><div class="line">RMAN&gt; SQL <span class="string">'ALTER DATABASE DATAFILE 5 ONLINE'</span>;</div><div class="line"></div><div class="line">sql statement: ALTER DATABASE DATAFILE 5 ONLINE</div><div class="line"></div><div class="line">RMAN&gt;</div></pre></td></tr></table></figure></p>
<ol>
<li>归档日志文件的恢复  </li>
</ol>
<p>恢复归档文件也是使用RESTORE命令，如果只是为了在恢复数据文件后应用归档文件，那并不需要手动对归档文件进行恢复，RMAN会在RECOVER的时候自动对适当的归档进行恢复<br>恢复归档文件也非常灵活，RMAN的RECOVER命令中提供了多种限定条件，可以精确指定恢复哪些备份的归档文件，例如，恢复归档序号为20到30之间的归档文件：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">RMAN&gt; RESTORE ARCHIVELOG SEQUENCE BETWEEN 20 AND 30;</div></pre></td></tr></table></figure></p>
<p>示例：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">RMAN&gt; RUN&#123; </div><div class="line">2&gt; SET ARCHIVELOG DESTINATION TO <span class="string">'F:\ORACLE\BACKUP\ARCLOG1'</span>; </div><div class="line">3&gt; RESTORE ARCHIVELOG SEQUENCE BETWEEN 15 AND 20; </div><div class="line">4&gt; SET ARCHIVELOG DESTINATION TO <span class="string">'F:\ORACLE\BACKUP\ARCLOG2'</span>; </div><div class="line">5&gt; RESTORE ARCHIVELOG SEQUENCE BETWEEN 21 AND 30; </div><div class="line">6&gt; SET ARCHIVELOG DESTINATION TO <span class="string">'F:\ORACLE\BACKUP\ARCLOG3'</span>; </div><div class="line">7&gt; RESTORE ARCHIVELOG SEQUENCE BETWEEN 31 AND 40;  </div><div class="line">8&gt; &#125;</div></pre></td></tr></table></figure></p>
<ol>
<li>控制文件的恢复  </li>
</ol>
<p>Oracle数据库的控制文件个头不大（最大不超过20000个数据块），Oracle数据库实例启动后（即启动到NOMOUNT模式），要通过加载控制文件确定数据文件、重做日志文件的路径（进入到MOUNT模式），然后才能打开数据库（Finally，OPEN数据库）。因此，没有了控制文件，想顺利启动Oracle数据库是不可能的。<br>控制文件中并不是只有数据文件和重做日志文件的路径，还包括数据库名称、数据库创建信息、表空间信息、数据文件状态、日志文件信息、备份信息、检查点信息等。<br>该文件不仅在数据库启动过程中需要，在Oracle数据库运行过程中，控制文件也需要发挥重要作用，如记录检查点的相关信息、归档文件路径、备份信息（假如采用RMAN执行备份的话），以及数据库发生结构修改（流行词汇形容叫领导班子调整，类似添加删除表空间、数据文件、日志文件）等操作都需要同步到控制文件。如果在Oracle数据库运行过程中，由于某些原因导致控制文件无法访问，则数据库也无法继续正常工作。<br>控制文件是一个二进制文件，不能直接通过文本编辑工具修改，一般这个文件中的内容都是由Oracle自行维护。一个Oracle数据库至少要拥有一个控制文件，鉴于其重要地位，Oracle对其的保护有加，在默认情况下，控制文件就会有两、三份冗余（就是一模一样的文件存在两、三份），这几份文件的一致性由Oracle自动维护，冗余的数量和冗余文件的位置可以由DBA指定，Oracle建议控制文件至少要有两份冗余，并且存储在不同的磁盘中，以提高该文件的可用性。  </p>
<p>查询当前数据库拥有的控制文件：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">SQL&gt; SELECT NAME FROM V<span class="variable">$CONTROLFILE</span>; </div><div class="line"></div><div class="line">NAME</div><div class="line">--------------------------------------------------------------------------------</div><div class="line">/u01/data/orcl/control01.ctl</div><div class="line">/u01/data/orcl/control02.ctl</div><div class="line"></div><div class="line">SQL&gt; SHOW PARAMETER CONTROL_FILES;</div><div class="line"></div><div class="line">NAME				     TYPE	 VALUE</div><div class="line">------------------------------------ ----------- ------------------------------</div><div class="line">control_files			     string	 /u01/data/orcl/control01.ctl,</div><div class="line">						 /u01/data/orcl/control02.ctl</div><div class="line">SQL&gt;</div></pre></td></tr></table></figure></p>
<p>如果通知文件丢失，可以通过以下集中方式恢复：</p>
<ul>
<li>从自动备份中恢复  </li>
</ul>
<p>由于没有了控制文件，目标数据库只能启动到NOMOUNT状态，不过在启动数据库之前，必须首先通过SET命令设置DBID：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#获取数据库的DBID</span></div><div class="line">SQL&gt; SELECT DBID FROM V<span class="variable">$DATABASE</span>;</div><div class="line"></div><div class="line">      DBID</div><div class="line">----------</div><div class="line">1455780274</div><div class="line"></div><div class="line">SQL&gt;</div></pre></td></tr></table></figure></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">RMAN&gt; SET DBID=1455780274;</div><div class="line">RMAN&gt; STARTUP NOMOUNT;</div><div class="line">RMAN&gt; RESTORE CONTROLFILE FROM AUTOBACKUP;</div></pre></td></tr></table></figure>
<ul>
<li>从备份集中恢复</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#在启动数据库之前，必须首先通过SET命令设置DBID</span></div><div class="line">RMAN&gt; SET DBID=1415261003;</div><div class="line">RMAN&gt; STARTUP NOMOUNT;</div><div class="line"><span class="comment">#指定控制文件所在备份片段的详细路径</span></div><div class="line">RMAN&gt; RESTORE CONTROLFILE FROM <span class="string">'/u01/app/oracle/product/11.2.0.4/db_1/dbs/05rtn873_1_1'</span>;</div></pre></td></tr></table></figure>
<ul>
<li>还有一种极端的情况，没有备份过控制文件，这时不凑巧的是，控制文件居然坏了。这时我们可以采用<a href="https://yfshare.github.io/2017/02/27/重建oracle控制文件/" target="_blank" rel="external">重构oracle的控制文件来恢复，参考这里</a></li>
</ul>
<ol>
<li>SPFILE初始化参数文件  </li>
</ol>
<p>虽然DBA可以通过BACKUP SPFILE命令手动备份服务器端的初始化参数文件，不过一般都不会主动执行，因为RMAN在备份控制文件时会自动备份SPFILE<br>相对于其他文件的备份，SPFILE最不重要（或者说最容易被恢复）。除了可以通过备份方式保障拥有可用的SPFILE外，数据库在运行过程中也会在Alert文件中留下数据库启动时的初始化参数信息。甚至即使这些都丢失了也没有关系，如果你对数据库足够了解，还是能够手动地创建出一份SPFILE出来，只是麻烦一些罢了。即使是运行中的数据库丢失了SPFILE也不会导致数据库崩溃（只不过下次启动时如果还没有能创建出一份来，数据库就起不来。</p>
<p>通过RMAN恢复初始化参数的过程与恢复控制文件极其类似<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">RMAN&gt; SET DBID=1415261003;</div><div class="line">RMAN&gt; STARTUP NOMOUNT;</div><div class="line"><span class="comment">#执行恢复命令，将SPFILE恢复到默认路径下</span></div><div class="line">RMAN&gt; RESTORE SPFILE FROM AUTOBACKUP;</div></pre></td></tr></table></figure></p>
<p>参考：<a href="http://blog.csdn.net/pan_tian/article/details/46896017" target="_blank" rel="external">http://blog.csdn.net/pan_tian/article/details/46896017</a></p>
<hr>
<p>本作品采用<a href="https://creativecommons.org/licenses/by/2.5/cn/" target="_blank" rel="external">知识共享署名 2.5 中国大陆许可协议</a>进行许可，欢迎转载，但转载请注明来自<a href="http://www.yfshare.vip">Jack Wang Blog</a>，并保持转载后文章内容的完整。本人保留所有版权相关权利。<br><img src="http://note.youdao.com/yws/api/personal/file/FE3C6F68961F4541AF284E5F346FC3CA?method=download&amp;shareKey=c5e4c3ca81daa6e908d5630f8c6ec242" alt="打赏"><br>本文出自”Jack Wang Blog”：<a href="http://www.yfshare.vip/2017/02/28/Oracle数据库备份与恢复-RMAN恢复/">http://www.yfshare.vip/2017/02/28/Oracle数据库备份与恢复-RMAN恢复/</a></p>
</div><script type="text/javascript" src="/js/share.js?v=2.0.0" async></script><a data-url="http://www.yfshare.vip/2017/02/28/Oracle数据库备份与恢复-RMAN恢复/" data-id="cjhdjbbo0002i10m5b9255r93" class="article-share-link">分享到</a><div class="tags"><a href="/tags/oracle/">oracle</a><a href="/tags/RMAN/">RMAN</a></div><div class="post-nav"><a href="/2017/02/28/Oracle数据库备份与恢复-RMAN备份/" class="pre">Oracle数据库备份与恢复 - RMAN备份</a><a href="/2017/02/27/重建oracle控制文件/" class="next">重建oracle控制文件</a></div><div id="disqus_thread"><div class="btn_click_load"><button class="disqus_click_btn">阅读评论 「请确保 disqus.com 可以正常加载」</button></div><script>var disqus_shortname = 'yfshare';
var disqus_identifier = '2017/02/28/Oracle数据库备份与恢复-RMAN恢复/';
var disqus_title = 'Oracle数据库备份与恢复 - RMAN恢复';
var disqus_url = 'http://www.yfshare.vip/2017/02/28/Oracle数据库备份与恢复-RMAN恢复/';
$('.btn_click_load').click(function() {
  (function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
  $('.btn_click_load').css('display','none');
});
$.ajax({
  url: 'https://disqus.com/favicon.ico',
  timeout: 3000,
  type: 'GET',
  success: (function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    $('.btn_click_load').css('display','none');
  })(),
  error: function() {
    $('.btn_click_load').css('display','block');
  }
});</script><script id="dsq-count-scr" src="//yfshare.disqus.com/count.js" async></script></div></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><div class="search-form"><input id="local-search-input" placeholder="Search" type="text" name="q" results="0"/><div id="local-search-result"></div></div></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> 分类</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Ansible/">Ansible</a><span class="category-list-count">8</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Atlassian/">Atlassian</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Database/">Database</a><span class="category-list-count">7</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Docker/">Docker</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/ELK/">ELK</a><span class="category-list-count">12</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Hexo/">Hexo</a><span class="category-list-count">12</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Jenkins/">Jenkins</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/K8S/">K8S</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Linux/">Linux</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/">Python</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Security/">Security</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Virtualization/">Virtualization</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/WEB/">WEB</a><span class="category-list-count">6</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Windows/">Windows</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Zabbix/">Zabbix</a><span class="category-list-count">5</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/版本控制系统/">版本控制系统</a><span class="category-list-count">1</span></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> 最新文章</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2018/03/17/glusterfs做持久化存储/">glusterfs做持久化存储</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/03/14/Prometheus监控TLS-Kubernetes集群/">Prometheus监控TLS Kubernetes集群</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/02/23/部署TLS-k8s/">部署TLS k8s</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/01/11/自建docker私有仓库-Vmware-Harbor/">自建docker私有仓库(Vmware Harbor)</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/12/20/The-Docker-of-Jira7-2-0-and-Confluence6-0-0/">The Docker of Jira7.2.0 and Confluence6.0.0</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/12/20/自建docker私有仓库-Registry/">自建docker私有仓库(Registry)</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/12/14/The-Redmine-svn-of-docker/">The Redmine_svn of docker</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/12/05/关于kernel-nf-conntrack-table-full-dropping-packet问题/">关于kernel: nf_conntrack: table full, dropping packet问题</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/12/04/ElasticSearch集群-基础/">ElasticSearch集群(基础)</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/12/04/timelion请求语法/">timelion请求语法</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-external-link"> 友情链接</i></div><ul></ul><a href="http://yfshare.blog.51cto.com/" title="酱油瓶 博客" target="_blank">酱油瓶 博客</a><ul></ul><a href="http://zerosre.com/" title="龙哥zero 博客" target="_blank">龙哥zero 博客</a><ul></ul><a href="http://renzhiyuan.blog.51cto.com/" title="任志远Ray 博客" target="_blank">任志远Ray 博客</a><ul></ul><a href="http://rongrong.njdgwl.com" title="浩子的 博客" target="_blank">浩子的 博客</a><ul></ul><a href="http://www.cnblogs.com/aresxin/" title="欣哥aresxin 博客" target="_blank">欣哥aresxin 博客</a><ul></ul><a href="http://securityit.cn/" title="万马奔腾" target="_blank">万马奔腾</a></div><div class="widget"><div class="widget-title"><i class="fa fa-external-resources"> 资源站</i></div><ul></ul><a href="http://mirror.symnds.com/distributions/CentOS-vault/" title="Centos镜像站" target="_blank">Centos镜像站</a><ul></ul><a href="http://www.rpmfind.net/" title="rpmfind mirror" target="_blank">rpmfind mirror</a><ul></ul><a href="http://rpm.org/" title="rpm.org" target="_blank">rpm.org</a><ul></ul><a href="http://rpm.pbone.net/" title="rpm search" target="_blank">rpm search</a><ul></ul><a href="http://download.chinaunix.net/" title="chinaunix download" target="_blank">chinaunix download</a><ul></ul><a href="http://www.anquanquan.info/" title="安全圈info" target="_blank">安全圈info</a><ul></ul><a href="http://source.tosimp.net/" title="Tosimp 资源站" target="_blank">Tosimp 资源站</a></div><div class="widget"><div class="widget-title"><i class="fa fa-external-music"> 音乐</i></div></div><iframe frameborder="no" border="0" marginwidth="0" marginheight="0" width=330 height=86 src="//music.163.com/outchain/player?type=2&id=371362&auto=1&height=66"></iframe><div class="widget"><div class="widget-title"><i class="fa fa-external-game"> 游戏</i></div><ul></ul><a href="/2048" title="2048小游戏" target="_blank">2048小游戏</a><ul></ul><a href="/tantanqiu" title="变色弹球跳台阶小游戏" target="_blank">变色弹球跳台阶小游戏</a></div><div class="widget"><div class="widget-title"><i class="fa fa-comment-o"> 最近评论</i></div><script type="text/javascript" src="//yfshare.disqus.com/recent_comments_widget.js?num_items=5&amp;hide_avatars=1&amp;avatar_size=32&amp;excerpt_length=20&amp;hide_mods=1"></script></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">Copyright © 2018 <a href="/." rel="nofollow">Jack Wang Blog.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><a id="rocket" href="#top" class="show"></a><script type="text/javascript" src="/js/totop.js?v=2.0.0" async></script><script type="text/javascript" src="//cdn.bootcss.com/fancybox/3.0.47/jquery.fancybox.min.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=2.0.0" async></script><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/fancybox/3.0.47/jquery.fancybox.min.css"><script type="text/javascript" src="/js/search.js?v=2.0.0"></script><script>var search_path = 'search.xml';
if (search_path.length == 0) {
   search_path = 'search.xml';
}
var path = '/' + search_path;
searchFunc(path, 'local-search-input', 'local-search-result');
</script><script>var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "//hm.baidu.com/hm.js?3890bdc1bfaccae9364479b65f36fbd2";
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(hm, s);
  })();
</script><script type="text/javascript" src="/js/codeblock-resizer.js?v=2.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=2.0.0"></script></div></body></html>